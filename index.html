<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MATE-PIGWEB25 Evaluator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<main class="main-wrapper">
    
    <div class="intro-header">
        <h1 class="title-with-icon">
            <img src="logo.png" alt="Logo" class="title-icon">
            MATE-PIGWEB25
        </h1>
        <p>Advanced EU Ethics Validator (Directive 2010/63/EU)</p>
    </div>

    <section class="app-card">
        <h2>Load Scenario Preset</h2>
        <div class="scenario-buttons">
            <button class="chip" onclick="loadPreset('xeno')"> Xenotransplantation</button>
            <button class="chip" onclick="loadPreset('amr')"> Antimicrobial Resistance</button>
            <button class="chip" onclick="loadPreset('pain')"> Pain Research</button>
            <button class="chip" onclick="loadPreset('neuro')"> Neuroscience (Primate)</button>
            <button class="chip" onclick="loadPreset('cosmetics')"> Cosmetics</button>
        </div>
    </section>

    <section class="app-card">
        <h2>1. Project Parameters</h2>
        
        <div class="form-group">
            <label>Project Title</label>
            <input type="text" id="projectTitle" placeholder="e.g. Study of Porcine Insulin">
        </div>

        <div class="form-group">
            <label>Research Goal</label>
            <select id="goal" onchange="toggleCosmetics()">
                <option value="10"> Life-threatening Disease / Public Health</option>
                <option value="7"> Regulatory Safety Testing</option>
                <option value="5"> Translational Research</option>
                <option value="3"> Basic Research</option>
                <option value="1"> Cosmetic / Non-Essential</option>
            </select>
        </div>

        <div id="cosmeticsBox" class="cosmetics-note">
            <strong>‚ö†Ô∏è REACH Regulation Check (1907/2006)</strong><br>
            Is this testing explicitly required for worker safety?
            <select id="reachJustified" style="margin-top:5px;">
                <option value="no">No ‚Üí Strictly Banned</option>
                <option value="yes">Yes ‚Üí Conditional Approval Possible</option>
            </select>
        </div>

        <div class="form-group">
            <label>Animal Species</label>
            <select id="species">
                <option value="pig">Pig (Porcine)</option>
                <option value="rodent">Rodent (Rat/Mouse)</option>
                <option value="primate">Non-Human Primate</option>
                <option value="dog">Dog</option>
                <option value="fish">Fish</option>
            </select>
        </div>

        <div class="form-group">
            <label>Number of Animals</label>
            <select id="numbers">
                <option value="0.8">&lt; 50 (Excellent Reduction)</option>
                <option value="1.0">50 ‚Äì 500 (Standard)</option>
                <option value="1.3">501 ‚Äì 2000 (High)</option>
                <option value="1.5">&gt; 2000 (Very High)</option>
            </select>
        </div>

        <div class="form-group">
            <label>Severity Classification</label>
            <select id="severityClass">
                <option value="mild">üü¢ Mild</option>
                <option value="moderate">üü° Moderate</option>
                <option value="severe">üî¥ Severe</option>
                <option value="non">‚ö´ Non-Recovery</option>
            </select>
        </div>

        <div class="form-group">
            <label>Cumulative Severity (History)</label>
            <select id="cumulativeSeverity">
                <option value="none">None (Naive Animals)</option>
                <option value="mild">Mild Previous Use</option>
                <option value="moderate">Moderate Previous Use</option>
            </select>
        </div>

        <div class="form-group">
            <label>Non-Animal Alternatives (Replacement)</label>
            <select id="alternatives">
                <option value="no">No validated alternative exists</option>
                <option value="partial">Partial replacement used</option>
                <option value="yes">Full replacement exists (Must use)</option>
            </select>
        </div>

        <div class="form-group">
            <label>Specific Harm Score (1-10)</label>
            <input type="number" id="suffering" min="1" max="10" value="5">
        </div>
        
        <div class="form-group">
            <label>Necessity Score (1-5)</label>
            <input type="number" id="necessity" min="1" max="5" value="3">
        </div>

    </section>

    <section class="app-card">
        <h2>2. Assessment Metrics</h2>
        
        <div class="slider-container">
            <div class="slider-Label-row">
                <span>Success Likelihood</span>
                <span id="successVal" class="slider-val">50%</span>
            </div>
            <input type="range" id="success_rate" min="0" max="100" value="50">
        </div>

        <div class="slider-container">
            <div class="slider-Label-row">
                <span>3Rs Compliance</span>
                <span id="threersVal" class="slider-val">60%</span>
            </div>
            <input type="range" id="threers" min="0" max="100" value="60">
        </div>

        <div class="slider-container">
            <div class="slider-Label-row">
                <span>Scientific Uncertainty</span>
                <span id="uncertaintyVal" class="slider-val">30%</span>
            </div>
            <input type="range" id="uncertainty" min="0" max="100" value="30">
        </div>

        <div class="form-group">
            <label style="display:flex; align-items:center; gap:10px;">
                <input type="checkbox" id="humaneEndpoints" style="width:auto;" required>
                Humane endpoints are clearly defined
            </label>
        </div>

        <button class="btn-analyze" onclick="calculateVerdict()">Evaluate Proposal</button>
        
        <div id="result" class="result-box"></div>
    </section>

    <section class="app-card">
        <h2>3. Documentation</h2>
        <button class="btn-analyze btn-secondary" onclick="generateNTS()">Generate Non-Technical Summary</button>
        <button class="btn-analyze btn-secondary" onclick="exportPDF()">Export Verdict as PDF</button>
        
        <div id="ntsOutput"></div>
    </section>

    <section class="app-card" style="border: 2px solid #bae6fd; background:#f0f9ff;">
        <h3>üß¨ NCBI Gene Lookup (Live API)</h3>
        <div style="display:flex; gap:10px;">
            <input type="text" id="geneSearch" placeholder="e.g. INS, BRCA1, TNF">
            <button onclick="fetchGene()" style="width:auto; padding:0 20px; border-radius:10px; border:none; background:var(--primary); color:white; cursor:pointer;">Search</button>
        </div>
        <div id="ncbiResult">Waiting for input...</div>
    </section>

    <footer style="text-align:center; font-size:12px; color:#9ca3af; margin-top:20px;">
        <p>Based on Directive 2010/63/EU, Regulation 1223/2009, and REACH 1907/2006.</p>
    </footer>

</main>

<script src="script.js"></script>

</body>
</html>